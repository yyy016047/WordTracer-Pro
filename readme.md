# WordTracer Pro (v1.9.2)

**WordTracer Pro** 是一款专为计算机专业学生和开发者设计的英语学习插件。它能精准识别 CS 技术术语，防止不完整的划词误选，并提供深度的词频统计分析，帮助你高效攻克技术文档中的生词。



## ✨ 核心特性

- **🔍 专业词库匹配**：优先匹配 `dict.json` 词库（如：Pipeline -> 流水线），支持大小写不敏感匹配。
- **🛡️ 选词守卫逻辑**：自动检测单词边界。如果选词不完整（如 `Prompt Cha`），插件将自动拦截，不发起查询且不计入统计，确保数据纯净。
- **🌐 多引擎翻译**：采用“有道智云官方 API + 有道词典备用 API + 本地词典”三级降级策略，支持多行详细释义展示。
- **🔊 真人发音**：集成 Web Speech API，一键播放地标美式读音。
- **🖍️ 全文高亮（开关制）**：在弹窗中一键开启全文高亮，瞬间标记网页中所有相同的单词，强化语境记忆。
- **📊 学习看板**：独立的全屏数据中心，记录单词、音标、翻译详情、查询频次及最后复习时间。
- **⏱️ 自动关闭窗口**：按下 'q' 键弹出的翻译窗口会在鼠标未悬停时自动关闭，提升使用体验。
- **⚡ 全局快捷键支持**：支持 `Ctrl+Shift+Q`(Windows/Linux) 或 `Command+Shift+Q`(Mac) 全局快捷键触发翻译。

## 📂 文件清单

- `manifest.json`: 插件核心配置与权限声明。
- `content.js`: 页面交互逻辑（按键监听、弹窗渲染、高亮控制、选词校验、自动关闭功能）。
- `background.js`: 后台服务脚本（跨域 API 中转、翻译降级逻辑、API 签名生成）。
- `style.css`: IDE 风格（VS Code Theme）深色简洁界面。
- `dict.json`: 预置计算机专业术语词库。
- `dashboard.html/js`: 词汇统计分析中心，展示单词、音标、翻译、查询频次等信息。
- `popup.html/js`: 插件快捷操作菜单。

## 🛠️ 安装指南

1. **克隆/下载仓库**到本地：
   ```bash
   git clone https://github.com/yyy016047/WordTracer-Pro.git
   ```

2. 打开浏览器（Chrome 或 Edge）：
   - Chrome: 进入 `chrome://extensions/`
   - Edge: 进入 `edge://extensions/`

3. 开启右上角的 **“开发者模式”**。

4. 点击 **“加载已解压的扩展程序”**（Chrome）或 **“加载已解压的扩展”**（Edge），选择本项目文件夹。

5. **注意**：每次更新代码后，请点击插件卡片的刷新图标，并 **刷新目标网页**。

## 📖 使用说明

### 基本使用
1. 选中文本中的单词或短语
2. 按下键盘上的 **'q'** 键（网页内快捷键）或 **`Ctrl+Shift+Q`/`Command+Shift+Q`**（全局快捷键）
3. 查看翻译结果和音标
4. 窗口会自动关闭，鼠标悬停时保持打开

### 统计面板
1. 点击插件图标
2. 选择 "学习看板"
3. 查看所有查询过的单词、音标、翻译、查询频次和最后查询时间

### 全文高亮
1. 按下 'q' 键查看翻译
2. 在弹窗底部勾选 "高亮" 选项
3. 网页中所有相同的单词会被高亮显示
4. 再次点击可取消高亮

## 🔧 配置选项

### 有道智云API配置（可选）
如果需要使用有道智云官方API，可以在 `background.js` 中配置：

```javascript
const appKey = 'your_app_key'; // 请在有道智云控制台获取应用ID
const appSecret = 'your_app_secret'; // 请在有道智云控制台获取应用密钥
```

未配置时会自动使用备用API，无需额外设置。

## 📝 技术实现

### 翻译API集成
- **有道智云官方API**：支持多种语言翻译，需要appKey和appSecret认证
- **有道词典备用API**：无需认证，作为官方API的降级方案
- **本地词典**：内置常用计算机专业术语，作为最后的fallback

### API签名生成
根据有道智云官方文档，签名生成逻辑：
1. 生成随机字符串salt
2. 获取当前时间戳curtime
3. 计算input参数：当单词长度>20时，取前10个字符+长度+后10个字符
4. 生成签名：sign = sha256(appKey + input + salt + curtime + appSecret)

### 自动关闭功能
- 窗口弹出后3秒自动关闭（如果鼠标未悬停）
- 鼠标进入窗口时暂停自动关闭
- 鼠标离开窗口时1秒后自动关闭

### 数据持久化
使用 `chrome.storage.local` 或 `browser.storage.local` 存储用户查询记录，包括：
- 单词/短语
- 音标
- 翻译结果
- 查询频次
- 最后查询时间

## 📄 更新日志

### v1.9.2
- 修复Edge浏览器快捷键无反应问题
- 代码重构：将重复翻译逻辑提取为统一函数
- 优化浏览器兼容性，确保所有API调用使用browser前缀

### v1.9.1
- 增加Edge浏览器支持
- 修复Service Worker注册失败问题
- 移除window对象引用，确保在Service Worker环境中正常运行

### v1.9
- 修复本地词库单词音标显示问题
- 优化翻译界面文本换行
- 增强本地词库管理功能

## ⚠️ 注意事项

- 扩展需要网络连接才能使用翻译功能
- 专业术语库可根据需要自行扩展
- 首次使用请确保已授予必要的权限
- 支持Chrome和Edge浏览器

## 📄 许可证
MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request来帮助改进WordTracer Pro！
